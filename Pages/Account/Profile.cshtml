@page
@model PassiveMoneyTracker.Pages.Account.ProfileModel
@{
    ViewData["Title"] = "Profile";
}

<div>
    <h2>Welcome, @Model.User.Username</h2>
    <form method="post">
        <button type="submit" asp-page-handler="Logout">Log Out</button>
    </form>
</div>

<h3>Passive Income History</h3>
<table border="1">
    <tr>
        <th>Month</th>
        <th>Year</th>
        <th>Income</th>
    </tr>
    @foreach (var record in Model.PassiveIncomeRecords)
    {
        <tr>
            <td>@record.Month</td>
            <td>@record.Year</td>
            <td>@record.Amount</td>
        </tr>
    }
</table>

<h3>Add New Income</h3>
<form method="post">
    <label>Month:</label>
    <input type="number" asp-for="NewIncome.Month" min="1" max="12" required />
    <br />
    <label>Year:</label>
    <input type="number" asp-for="NewIncome.Year" min="2000" max="2100" required />
    <br />
    <label>Income:</label>
    <input type="number" asp-for="NewIncome.Amount" step="0.01" required />
    <br />
    <button type="submit">Add Income</button>
</form>


<form method="post">
    <button type="submit" asp-page-handler="CalculateAverage">Calculate Average</button>
</form>

@if (TempData["AverageIncome"] != null)
{
    <p>Average income: @TempData["AverageIncome"]</p>
}


